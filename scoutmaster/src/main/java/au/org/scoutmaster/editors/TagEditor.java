package au.org.scoutmaster.editors;import org.vaadin.tokenfield.TokenField;import au.org.scoutmaster.domain.Tag;import com.vaadin.data.util.BeanItem;import com.vaadin.data.util.BeanItemContainer;import com.vaadin.ui.Alignment;import com.vaadin.ui.Button;import com.vaadin.ui.Button.ClickEvent;import com.vaadin.ui.Form;import com.vaadin.ui.HorizontalLayout;import com.vaadin.ui.VerticalLayout;import com.vaadin.ui.Window;public class TagEditor extends Window{	private Tag tag;	TagEditor(final String t, final TokenField f)	{		super("New Tag");		VerticalLayout l = new VerticalLayout();		setContent(l);		tag = new Tag((String) f.getValue());		setModal(true);		center();		setWidth("250px");		setStyleName("black");		setResizable(false);		// Just bind a Form to the Tag -pojo via BeanItem		Form form = new Form();		form.setItemDataSource(new BeanItem<Tag>(tag));		form.setImmediate(true);		l.addComponent(form);		// layout buttons horizontally		HorizontalLayout hz = new HorizontalLayout();		l.addComponent(hz);		hz.setSpacing(true);		hz.setWidth("100%");		Button dont = new Button("Don't add", new Button.ClickListener()		{			private static final long serialVersionUID = -1198191849568844582L;			public void buttonClick(ClickEvent event)			{				if (tag.getEmail() == null || tag.getEmail().length() < 1)				{					tag.setEmail(tag.getName());				}				f.addToken(tag);				f.getUI().removeWindow(EditTagWindow.this);			}		});		hz.addComponent(dont);		hz.setComponentAlignment(dont, Alignment.MIDDLE_LEFT);		Button add = new Button("Add to tags", new Button.ClickListener()		{			private static final long serialVersionUID = 1L;			public void buttonClick(ClickEvent event)			{				if (tag.getEmail() == null || tag.getEmail().length() < 1)				{					tag.setEmail(tag.getName());				}				((BeanItemContainer) f.getContainerDataSource()).addBean(tag);				f.addToken(tag);				f.getUI().removeWindow(TagEditor.this);			}		});		hz.addComponent(add);		hz.setComponentAlignment(add, Alignment.MIDDLE_RIGHT);	}}