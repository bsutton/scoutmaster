<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<!-- Add standard Activity Types -->
	<changeSet author="bsutton" id="1.0.10">
		<insert tableName="activitytype">
			<column name="name" value="Meeting" />
			<column name="DESCRIPTION" value="" />
			<column name="CONSISTENCYVERSION" valueNumeric="1" />
		</insert>

		<insert tableName="activitytype">
			<column name="name" value="Phone Call" />
			<column name="DESCRIPTION" value="" />
			<column name="CONSISTENCYVERSION" valueNumeric="1" />
		</insert>

		<insert tableName="activitytype">
			<column name="name" value="Email" />
			<column name="DESCRIPTION" value="Email sent." />
			<column name="CONSISTENCYVERSION" valueNumeric="1" />
		</insert>

		<insert tableName="activitytype">
			<column name="name" value="Text Message (SMS)" />
			<column name="DESCRIPTION" value="Text Message (SMS) sent." />
			<column name="CONSISTENCYVERSION" valueNumeric="1" />
		</insert>

		<insert tableName="activitytype">
			<column name="name" value="Bulk Email" />
			<column name="DESCRIPTION" value="Bulk Email sent." />
			<column name="CONSISTENCYVERSION" valueNumeric="1" />
		</insert>

		<insert tableName="activitytype">
			<column name="name" value="Bulk Text Message (SMS)" />
			<column name="DESCRIPTION" value="Bulk Text Message (SMS) sent."/>
			<column name="CONSISTENCYVERSION" valueNumeric="1" />
		</insert>

		<insert tableName="activitytype">
			<column name="name" value="Meeting" />
			<column name="DESCRIPTION" value="" />
			<column name="CONSISTENCYVERSION" valueNumeric="1" />
		</insert>

		<!--  relink the addedby to the user table. -->		
		<dropForeignKeyConstraint baseTableName="activity" constraintName="FK_ACTIVITY_ADDEDBY_ID"/>
        <addForeignKeyConstraint baseColumnNames="ADDEDBY_ID" baseTableName="activity" constraintName="FK_ACTIVITY_ADDEDBY_ID" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ID" referencedTableName="user"/>

	</changeSet>
</databaseChangeLog>
